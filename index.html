
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>smaXtec Integration API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <link href="images/favicons.png" rel="icon" type="image/png" />
  </head>

  <body class="index" data-languages="[&quot;bash&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="bash">bash</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#endpoints" class="toc-h2 toc-link" data-title="Endpoints">Endpoints</a>
                  </li>
                  <li>
                    <a href="#parameters-and-responses" class="toc-h2 toc-link" data-title="Parameters and Responses">Parameters and Responses</a>
                  </li>
                  <li>
                    <a href="#user-registration" class="toc-h2 toc-link" data-title="User Registration">User Registration</a>
                  </li>
                  <li>
                    <a href="#common-tasks" class="toc-h2 toc-link" data-title="Common Tasks">Common Tasks</a>
                  </li>
                  <li>
                    <a href="#placeholder" class="toc-h2 toc-link" data-title="Placeholder">Placeholder</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#organisations" class="toc-h1 toc-link" data-title="Organisations">Organisations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-organisations" class="toc-h2 toc-link" data-title="Get All Organisations">Get All Organisations</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#animals" class="toc-h1 toc-link" data-title="Animals">Animals</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-animals" class="toc-h2 toc-link" data-title="Get All Animals">Get All Animals</a>
                  </li>
                  <li>
                    <a href="#get-single-animal" class="toc-h2 toc-link" data-title="Get Single Animal">Get Single Animal</a>
                  </li>
                  <li>
                    <a href="#create-update-single-animal" class="toc-h2 toc-link" data-title="Create/Update Single Animal">Create/Update Single Animal</a>
                  </li>
                  <li>
                    <a href="#get-animal-metrics" class="toc-h2 toc-link" data-title="Get Animal Metrics">Get Animal Metrics</a>
                  </li>
                  <li>
                    <a href="#get-animal-data" class="toc-h2 toc-link" data-title="Get Animal Data">Get Animal Data</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#events" class="toc-h1 toc-link" data-title="Events">Events</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-events" class="toc-h2 toc-link" data-title="Get All Events">Get All Events</a>
                  </li>
                  <li>
                    <a href="#create-events" class="toc-h2 toc-link" data-title="Create Events">Create Events</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#translations" class="toc-h1 toc-link" data-title="Translations">Translations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-event-translations" class="toc-h2 toc-link" data-title="Get all Event Translations">Get all Event Translations</a>
                  </li>
                  <li>
                    <a href="#get-single-event-translations" class="toc-h2 toc-link" data-title="Get single Event Translations">Get single Event Translations</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://messenger-staging.smaxtec.com/'>smaXtec Messenger (staging)</a></li>
            <li><a href='https://api-staging.smaxtec.com/integration/v2/'>smaXtec API (staging)</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the smaXtec Integration API! üêÆ You can use our API to access intern API endpoints, which can get information on animals and animal events in our database.</p>

<p>The Integration API offer the following advantages:</p>

<ul>
<li>The animals are identified with the eratag/EID and not the smaXtec internal IDs.</li>
<li>External partners do not need to choose to update or create. They can simply send the current state of all objects and smaXtec will do the synchronisation.</li>
</ul>
<h2 id='endpoints'>Endpoints</h2>
<p>The <em>live</em> <code>[endpoint]</code> is <code>https://api.smaxtec.com/integration/v2</code> and the <em>staging</em> is <code>https://api-staging.smaxtec.com/integration/v2</code>.</p>
<h2 id='parameters-and-responses'>Parameters and Responses</h2>
<p>The parameters in the data of the PUT API calls and the response of the GET/PUT API calls are the same. This means that the output can be taken and provided to a PUT methode.</p>
<h2 id='user-registration'>User Registration</h2>
<p>The registration is done via the <a href="https://messenger.smaxtec.com">smaXtec messenger</a>.</p>
<h2 id='common-tasks'>Common Tasks</h2>
<p>For all common tasks the <a href="#authentication">authetication</a> is necessary.</p>
<h3 id='get-organisation-of-user'>Get Organisation of User</h3>
<p>One user can have multiple organisations. With the logged in user the user can <a href="#get-all-organisations">get all organisations</a>.</p>
<h3 id='add-or-update-an-animal'>Add or Update an Animal</h3>
<p>For adding an animal to an organisation (<code>organisation_id</code>) at least the required fields in the animal data (link to animal parameters) need to be filled in. With the <a href="#create-update-single-animal">PUT call</a> the animal can be added.</p>

<p>For updating an animal the <code>organisation_id</code> and the <code>official_id</code> of the animal, which should be updated, need to be in the route. Write all changing parameters in the data and use the <a href="#create-update-single-animal">animal PUT</a> methode. The response of the animal calls can be put in as data to the animal put call. Changes are detected and are applied.</p>
<h3 id='add-insemination-pregnancy-result-calving-confirmation-and-abort'>Add insemination, pregnancy result, calving confirmation and abort</h3>
<p>These occurrences are stored as <a href="#events">events</a> where insemination, pregnancy result, calving confirmation and abort are the event types. To add an event the event type (<code>event_type</code>) and the event time (<code>event_ts</code>) need to be provided to the <a href="#create-events">event PUT methode</a>. Regarding of the type additional information can be added which is listed in the parameter list.</p>

<p>The cronical order of an animal life and how the events happen is the following:</p>

<p><code>-&gt; insemination -&gt; pregnancy_result -&gt; calving_confirmation -&gt;</code></p>

<p>or</p>

<p><code>-&gt; insemination -&gt; pregnancy_result -&gt; abort -&gt;</code></p>
<h2 id='placeholder'>Placeholder</h2>
<p>Several placeholders are used in this document.</p>

<table><thead>
<tr>
<th>Placeholder</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>[token]</td>
<td><a href="#authentication">Authentication</a> token which can be get over the API</td>
<td>yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg</td>
</tr>
<tr>
<td>[endpoint]</td>
<td>Endpoint to the integration API</td>
<td>https://api-staging.smaxtec.com/integration/v2</td>
</tr>
<tr>
<td>[email]</td>
<td>E-mail adress from the registered user</td>
<td>user@smaxtec.com</td>
</tr>
<tr>
<td>[password]</td>
<td>Password from the registered user</td>
<td>super_secret_password</td>
</tr>
<tr>
<td>[organisation_id]</td>
<td>smaXtec intern ID of the organisation. Can be <a href="#get-all-organisations">get</a> over the API</td>
<td>123456qwertz</td>
</tr>
<tr>
<td>[official_id]</td>
<td>The official id of the animal. This is in the most cases the eartag of the animal.</td>
<td>AT111111112</td>
</tr>
<tr>
<td>[integration_name]</td>
<td>The name of the integrating application.</td>
<td>HerdmanagerXYZ</td>
</tr>
<tr>
<td>[language]</td>
<td>Language of the wanted translated text.</td>
<td>en</td>
</tr>
<tr>
<td>[event_type]</td>
<td><a href="#get-all-events">Event type</a> of an animal event.</td>
<td>HEALTH_102</td>
</tr>
</tbody></table>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">email</span><span class="o">=</span><span class="s">'user@smaxtec.com'</span>
<span class="n">password</span><span class="o">=</span><span class="s">'super_secret_password'</span>
<span class="n">integration_name</span><span class="o">=</span><span class="s">'my-integration-app-name'</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/users/session_token'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s">"user"</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span>
   <span class="s">"password"</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span>
   <span class="s">"integration_name"</span><span class="p">:</span> <span class="n">integration_name</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">authentication</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X POST <span class="s2">"[endpoint]/users/session_token?email=[email]&amp;password=[password]&amp;integration_name=[integration_name]"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An authorization token is requested over the API. The Response is a token which needs to be in all API requests to the server in a header that looks like the following:</p>

<p><code>-H &quot;authorization: Bearer [token]&quot;</code></p>

<p>For example:</p>

<p><code>-H &quot;authorization: Bearer yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg&quot;</code></p>

<aside class="notice">The authorization header is needed in all following calls.</aside>

<p><strong>HTTP Request</strong></p>

<p><code>POST &quot;[endpoint]/users/session_token?email=[email]&amp;password=[password]&amp;integration_name=[integration_name]&quot;</code></p>
<h1 id='organisations'>Organisations</h1><h2 id='get-all-organisations'>Get All Organisations</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/organisations'</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">all_user_organisations</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X GET <span class="s2">"[endpoint]/organisations"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Organisation Name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"organisation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456qwertz"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"read"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"groups.update"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"animals.create"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"animals.update"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"animals.archive"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"animals.changetags"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"animals.changegroup"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"devices.update"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lactations.update"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"diagnosis.update"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"heats.update"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"organisations.update"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"annotations.update"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Europe/Vienna"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all organisations of the user. For the Integration API calls the <code>organisation_id</code> is needed to make changes to the animals of the organsation.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET [endpoint]/organisations</code></p>

<p><strong>Response</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Name of the Organisation.</td>
</tr>
<tr>
<td>organisation_id</td>
<td>ID of the organisation where the animal belongs to.</td>
</tr>
<tr>
<td>permissions</td>
<td>Permission the user has for this organisation.</td>
</tr>
<tr>
<td>role</td>
<td>Role the user has for this organisation.</td>
</tr>
<tr>
<td>timezone</td>
<td>Timezone of the organisation.</td>
</tr>
</tbody></table>
<h1 id='animals'>Animals</h1><h2 id='get-all-animals'>Get All Animals</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">organisation_id</span> <span class="o">=</span> <span class="s">'123456qwertz'</span>
<span class="n">optional_parameters</span> <span class="o">=</span> <span class="s">'?include_archived=false'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/organisations/'</span> <span class="o">+</span> <span class="n">organisation_id</span> <span class="o">+</span> <span class="s">'/animals'</span> <span class="o">+</span> <span class="n">optional_parameters</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">all_animals</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X GET <span class="s2">"[endpoint]/organisations/[organisation_id]/animals"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"archived"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-10T13:04:52+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-23T06:33:24+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_device_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0700000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112 - susi"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"group_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57920fca506d993asdfghjkl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lactation_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Young_Cow"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stall"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mark"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mixed_race"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANGLER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLECKVIEW"</span><span class="p">,</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">78</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"susi"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"official_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"official_id_rule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"organisation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456qwertz"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mixed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sold"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves from a provided <code>organisation_id</code> all animals.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET &quot;[endpoint]/organisations/[organisation_id]/animals&quot;</code></p>

<p><strong>URL Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>organisation_id</td>
<td>ID of the organisation where the animal belongs to.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>include_archived</td>
<td>Include archived animals.</td>
<td>default: <code>false</code></td>
</tr>
</tbody></table>
<h2 id='get-single-animal'>Get Single Animal</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">organisation_id</span> <span class="o">=</span> <span class="s">'123456qwertz'</span>
<span class="n">official_id</span> <span class="o">=</span> <span class="s">'AT111111112'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/organisations/'</span> <span class="o">+</span> <span class="n">organisation_id</span> <span class="o">+</span> <span class="s">'/animals/'</span> <span class="o">+</span> <span class="n">official_id</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">animal</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X GET <span class="s2">"[endpoint]/organisations/[organisation_id]/animals/[official_id]"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"archived"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-10T13:04:52+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-23T06:33:24+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"current_device_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0700000001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112 - susi"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"group_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57920fca506d993asdfghjkl"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lactation_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Young_Cow"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stall"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mark"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mixed_race"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANGLER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLECKVIEW"</span><span class="p">,</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">78</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"susi"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"official_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"official_id_rule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"organisation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456qwertz"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mixed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sold"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves from a provided <code>organisation_id</code> and <code>official_id</code> the animal.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET &quot;[endpoint]/organisations/[organisation_id]/animals/[official_id]&quot;</code></p>

<p><strong>URL Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>organisation_id</td>
<td>ID of the organisation where the animal belongs to.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>official_id</td>
<td>The official id of the animal. This is in the most cases the eartag of the animal.</td>
<td><code>required</code></td>
</tr>
</tbody></table>
<h2 id='create-update-single-animal'>Create/Update Single Animal</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">organisation_id</span> <span class="o">=</span> <span class="s">'123456qwertz'</span>
<span class="n">official_id</span> <span class="o">=</span> <span class="s">'AT111111112'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/organisations/'</span> <span class="o">+</span> <span class="n">organisation_id</span> <span class="o">+</span> <span class="s">'/animals/'</span> <span class="o">+</span> <span class="n">official_id</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"name"</span><span class="p">:</span> <span class="s">"Strolcha"</span><span class="p">,</span>
    <span class="s">"group_id"</span><span class="p">:</span> <span class="s">"57920fca506d993asdfgh123"</span><span class="p">,</span>
    <span class="s">"birthday"</span><span class="p">:</span> <span class="s">"2019-01-10T13:04:52+00:00"</span><span class="p">,</span>
    <span class="s">"race"</span><span class="p">:</span> <span class="s">"mixed"</span><span class="p">,</span>
    <span class="s">"location"</span><span class="p">:</span> <span class="s">"stall"</span><span class="p">,</span>
    <span class="s">"_id"</span><span class="p">:</span> <span class="s">"5c480ab3314724e123456789"</span><span class="p">,</span>
    <span class="s">"official_id_rule"</span><span class="p">:</span> <span class="s">"AT"</span><span class="p">,</span>
    <span class="s">"display_name"</span><span class="p">:</span> <span class="s">"AT111111112 - susi"</span><span class="p">,</span>
    <span class="s">"archived"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"created_at"</span><span class="p">:</span> <span class="s">"2019-01-23T06:33:24+00:00"</span><span class="p">,</span>
    <span class="s">"official_id"</span><span class="p">:</span> <span class="s">"AT111111112"</span><span class="p">,</span>
    <span class="s">"lactation_status"</span><span class="p">:</span> <span class="s">"Young_Cow"</span><span class="p">,</span>
    <span class="s">"current_device_id"</span><span class="p">:</span> <span class="s">"0700000001"</span><span class="p">,</span>
    <span class="s">"mark"</span><span class="p">:</span> <span class="s">"AT111111112"</span><span class="p">,</span>
    <span class="s">"tags"</span><span class="p">:</span> <span class="p">[</span><span class="s">"sold"</span><span class="p">],</span>
    <span class="s">"mixed_race"</span><span class="p">:</span> <span class="p">[{</span><span class="s">"race"</span><span class="p">:</span> <span class="s">"ANGLER"</span><span class="p">,</span> <span class="s">"percent"</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span> <span class="p">{</span><span class="s">"race"</span><span class="p">:</span> <span class="s">"FLECKVIEW"</span><span class="p">,</span> <span class="s">"percent"</span><span class="p">:</span> <span class="mi">78</span><span class="p">}],</span>
    <span class="s">"organisation_id"</span><span class="p">:</span> <span class="s">"123456qwertz"</span>
<span class="p">}</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">animal</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X PUT <span class="s2">"[endpoint]/organisations/[organisation_id]/animals/[official_id]"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
        -H  <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
        -d <span class="s2">"{  </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Strolcha</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">group_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">57920fca506d993asdfgh123</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">birthday</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2019-01-10T13:04:52+00:00</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">race</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">mixed</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">location</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">stall</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">5c480ab3314724e123456789</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">official_id_rule</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">AT</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">display_name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">AT111111112 - susi</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">archived</span><span class="se">\"</span><span class="s2">: false,  </span><span class="se">\"</span><span class="s2">created_at</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2019-01-23T06:33:24+00:00</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">official_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">AT111111112</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">lactation_status</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Young_Cow</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">current_device_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">0700000001</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">mark</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">AT111111112</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">tags</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\"</span><span class="s2">sold</span><span class="se">\"</span><span class="s2">],  </span><span class="se">\"</span><span class="s2">mixed_race</span><span class="se">\"</span><span class="s2">: [{</span><span class="se">\"</span><span class="s2">race</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">ANGLER</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">percent</span><span class="se">\"</span><span class="s2">: 22}, {</span><span class="se">\"</span><span class="s2">race</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">FLECKVIEW</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">percent</span><span class="se">\"</span><span class="s2">: 78}],,  </span><span class="se">\"</span><span class="s2">organisation_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">123456qwertz</span><span class="se">\"</span><span class="s2">}"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"archived"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-10T13:04:52+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-23T06:33:24+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"current_device_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0700000001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112 - Strolcha"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"group_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57920fca506d993asdfghjkl"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lactation_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Young_Cow"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stall"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mark"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mixed_race"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANGLER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FLECKVIEW"</span><span class="p">,</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">:</span><span class="w"> </span><span class="mi">78</span><span class="p">}],</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Strolcha"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"official_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT111111112"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"official_id_rule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"organisation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456qwertz"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"race"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mixed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sold"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates/updates an animal which is in the organisation with <code>organisation_id</code> and the <code>official_id</code>. If the animal is created or updated depends. If the animal with the provided <code>official_id</code> exists in the organisation, it gets updated. Otherwise the animal gets created. The animal response can be used as a input for thes call and just the parameters that are needed to be updated can be replaced.</p>

<p><strong>HTTP Request</strong></p>

<p><code>PUT &quot;[endpoint]/organisations/[organisation_id]/animals/[official_id]&quot;</code></p>

<p><strong>URL Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>organisation_id</td>
<td>ID of the organisation where the animal belongs to.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>official_id</td>
<td>The official id of the animal. This is in the most cases the eartag of the animal.</td>
<td><code>required</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>_id</td>
<td>Internal ID for the animal. Can&#39;t be changed.</td>
<td></td>
</tr>
<tr>
<td>archived</td>
<td>When the animal is archived (inactive) the archived is set to <code>true</code>.</td>
<td></td>
</tr>
<tr>
<td>birthday</td>
<td>Day of birth of the animal.</td>
<td></td>
</tr>
<tr>
<td>created_at</td>
<td>The creation time of the animal in the smaXtec system. Can&#39;t be changed.</td>
<td></td>
</tr>
<tr>
<td>current_device_id</td>
<td>The ID of the device which is currently active in the animal.</td>
<td></td>
</tr>
<tr>
<td>display_name</td>
<td>Composition of the official ID and the name of the animal.</td>
<td></td>
</tr>
<tr>
<td>group_id</td>
<td>ID of the group where the animal is currently in.</td>
<td></td>
</tr>
<tr>
<td>lactation_status</td>
<td>Status of the cow. Possible parameters: <code>Young_Cow</code>, <code>Lactating_Cow</code>, <code>Dry_Cow</code>. Changes according to events.</td>
<td></td>
</tr>
<tr>
<td>location</td>
<td>Location where the cow currently is.</td>
<td></td>
</tr>
<tr>
<td>mark</td>
<td>Animal number.</td>
<td><code>required</code> for creation.</td>
</tr>
<tr>
<td>mixed_race</td>
<td>When the animal is a breed of two or more races. Example: <code>&quot;mixed_race&quot;: [{&quot;race&quot;: &quot;ANGLER&quot;, &quot;percent&quot;: 22},</code> <code>{&quot;race&quot;: &quot;FLECKVIEW&quot;, &quot;percent&quot;: 78}]</code>. The percent needs to sum up to 100. If mixed race is set <code>&quot;race&quot;: &quot;mixed&quot;</code>.</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>Name of the animal.</td>
<td></td>
</tr>
<tr>
<td>official_id</td>
<td>Official ID (ear tag) of the animal. Needs to be unique in the organisation. If the official_id is in the data of the PUT methode and is different from the route the official_id gets updated.</td>
<td></td>
</tr>
<tr>
<td>official_id_rule</td>
<td>The rule how the official_id should be formated/stored. Possible parameters: <code>AT</code>, <code>BE</code>, <code>BG</code>, etc. (country code).</td>
<td></td>
</tr>
<tr>
<td>organisation_id</td>
<td>ID of the organisation where the animal belongs to.</td>
<td></td>
</tr>
<tr>
<td>race</td>
<td>Race of the animal.</td>
<td></td>
</tr>
<tr>
<td>tags</td>
<td>Tags which can be given to the animals. Example: <code>&quot;tags&quot;: [&quot;sold&quot;]</code>.</td>
<td></td>
</tr>
</tbody></table>
<h2 id='get-animal-metrics'>Get Animal Metrics</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">organisation_id</span> <span class="o">=</span> <span class="s">'123456qwertz'</span>
<span class="n">official_id</span> <span class="o">=</span> <span class="s">'AT111111112'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/organisations/'</span> <span class="o">+</span> <span class="n">organisation_id</span> <span class="o">+</span> <span class="s">'/animals/'</span> <span class="o">+</span> <span class="n">official_id</span> <span class="o">+</span> <span class="s">'/metrics'</span>

<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">animal</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</code></pre><pre class="highlight shell"><code>curl -X GET <span class="s2">"[endpoint]/organisations/[organisation_id]/animals/[official_id]/metrics"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
        -H  <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"temp"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"available_units"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"degree_celsius"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"degree_fahrenheit"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"act"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"available_units"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"act"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"act_index"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"available_units"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"percent"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This Endpoint retrieves all metrics and the corresponding availlable units from an animal which is in the organisation with <code>organisation_id</code> and the <code>official_id</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET &quot;[endpoint]/organisations/[organisation_id]/animals/[official_id]/metrics&quot;</code></p>

<p><strong>URL Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>organisation_id</td>
<td>ID of the organisation where the animal belongs to.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>official_id</td>
<td>The official id of the animal. This is in the most cases the eartag of the animal.</td>
<td><code>required</code></td>
</tr>
</tbody></table>
<h2 id='get-animal-data'>Get Animal Data</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">organisation_id</span> <span class="o">=</span> <span class="s">'123456qwertz'</span>
<span class="n">official_id</span> <span class="o">=</span> <span class="s">'AT111111112'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/organisations/'</span> <span class="o">+</span> <span class="n">organisation_id</span> <span class="o">+</span> <span class="s">'/animals/'</span> <span class="o">+</span> <span class="n">official_id</span> <span class="o">+</span> <span class="s">'/data.json'</span>

<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"metrics"</span><span class="p">:</span> <span class="p">[</span><span class="s">"temp"</span><span class="p">,</span> <span class="s">"act"</span><span class="p">],</span>
    <span class="s">"from_date"</span><span class="p">:</span> <span class="s">"2019-02-01T08:21:33+0000"</span><span class="p">,</span>
    <span class="s">"to_date"</span><span class="p">:</span> <span class="s">"2019-02-01T12:22:16+0000"</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">animal</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

</code></pre><pre class="highlight shell"><code>curl -X GET <span class="s2">"[endpoint]/organisations/[organisation_id]/animals/[official_id]/data.json"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
        -H  <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
        -d <span class="s2">"{  </span><span class="se">\"</span><span class="s2">metrics</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\"</span><span class="s2">temp</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">act</span><span class="se">\"</span><span class="s2">],  </span><span class="se">\"</span><span class="s2">from_date</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2019-02-01T08:21:33+0000</span><span class="se">\"</span><span class="s2">,  </span><span class="se">\"</span><span class="s2">to_date</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2019-02-01T12:22:16+0000</span><span class="se">\"</span><span class="s2">}"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="s2">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"temp"</span><span class="p">,</span><span class="w"> </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T09: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">38.13</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T10: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">38.52</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T11: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">38.85</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T12: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">36.89</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T13: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">37.6</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">],</span><span class="w"> </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"degree_celsius"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="s2">"metric"</span><span class="p">:</span><span class="w"> </span><span class="s2">"act"</span><span class="p">,</span><span class="w"> </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T09: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">3.35</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T10: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">3.31</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T11: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">3.46</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T12: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">3.99</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="s2">"2019-02-01T13: 00: 00+01: 00"</span><span class="p">,</span><span class="w">
                </span><span class="mf">4.3</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">],</span><span class="w"> </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"act"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves from a provided <code>organisation_id</code> and <code>official_id</code> data from its sensor. The response depends on the provided list of <code>metrics</code> and the period.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET &quot;[endpoint]/organisations/[organisation_id]/animals/[official_id]/data.json&quot;</code></p>

<p><strong>URL Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>organisation_id</td>
<td>ID of the organisation where the animal belongs to.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>official_id</td>
<td>The official id of the animal. This is in the most cases the eartag of the animal.</td>
<td><code>required</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>metrics</td>
<td>The list of metrics where data is wanted.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>from_date</td>
<td>The start date from the period where data is wanted.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>to_date</td>
<td>The end date from the period where data is wanted.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>aggregation_period</td>
<td>The period of data points. Either 10 minutes or 1 hour.</td>
<td></td>
</tr>
<tr>
<td>preferred_units</td>
<td>The units which are prefered. For example: &quot;act&quot;, &quot;degree_celsius&quot;, &quot;degree_fahrenheit&quot;.</td>
<td></td>
</tr>
</tbody></table>
<h1 id='events'>Events</h1>
<p>Occurrences which arise for an animal are stored in the <strong>events</strong>. These events include reproduction events, health events, feeding events etc.. All events can be fetched but just events of the type <code>heat</code>, <code>insemination</code>, <code>pregnancy_result</code>, <code>dry_off</code>, <code>calving_confirmation</code>, <code>abort</code> and <code>diagnosis</code> can be created via the API. Additional information regarding the event type can be added. All other events are generated by the smaXtec system.</p>
<h2 id='get-all-events'>Get All Events</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">organisation_id</span> <span class="o">=</span> <span class="s">'123456qwertz'</span>
<span class="n">official_id</span> <span class="o">=</span> <span class="s">'AT111111112'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/organisations/'</span> <span class="o">+</span> <span class="n">organisation_id</span> <span class="o">+</span> <span class="s">'/animals/'</span> <span class="o">+</span> <span class="n">official_id</span> <span class="o">+</span> <span class="s">'/events'</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">all_animal_events</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X GET <span class="s2">"[endpoint]/organisations/[organisation_id]/animals/[official_id]/events"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b61e5bd90e6e1d84e4a2123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"animal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"create_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-01T16:54:21+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-23T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"calving_confirmation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"calving_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b61e5bdb493c3931a260123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"animal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"create_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-01T16:54:21+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-23T01:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"information_update"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b61eb7e2782f75791c5e123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"animal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"create_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-01T17:18:54+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-15T00:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"heat"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cycle_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b61ed2c19cd8518817d6123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"animal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"create_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-01T17:26:04+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-22T20:13:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insemination"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"days_to_calving"</span><span class="p">:</span><span class="w"> </span><span class="mi">275</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b61ed2c041922c1f7030123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"animal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"create_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-01T17:26:04+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-22T23:13:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pregnancy_result"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pregnant"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expected_calving_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-23T12:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"insemination_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-22T20:13:00+00:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ae62c4ad591117f095f4123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"animal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"create_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-29 21:00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-29 21:00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"health_106"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves from a provided <code>organisation_id</code> and <code>official_id</code> the events of an animal.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET &quot;[endpoint]/organisations/[organisation_id]/animals/[official_id]/events&quot;</code></p>

<p><strong>URL Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>organisation_id</td>
<td>ID of the organisation where the animal belongs to.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>official_id</td>
<td>The official id of the animal. This is in the most cases the eartag of the animal.</td>
<td><code>required</code></td>
</tr>
</tbody></table>

<p><strong>Event Types</strong></p>

<p>The smaXtec system has the following event types.</p>

<table><thead>
<tr>
<th>Event Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>heat</td>
<td>Detection of a heat</td>
</tr>
<tr>
<td>insemination</td>
<td>Inseminated of an animal</td>
</tr>
<tr>
<td>pregnancy_result</td>
<td>A positive or negative pregnancy result</td>
</tr>
<tr>
<td>calving_detection</td>
<td>Detection of a calving</td>
</tr>
<tr>
<td>dry_off</td>
<td>Dry off</td>
</tr>
<tr>
<td>calving_confirmation</td>
<td>Confirmation of a calving</td>
</tr>
<tr>
<td>waiting_for_calving</td>
<td>Few days before calving</td>
</tr>
<tr>
<td>abort</td>
<td>Abortion of a pregnancy which can be a late abort</td>
</tr>
<tr>
<td>information_update</td>
<td>Updating information</td>
</tr>
<tr>
<td>diagnosis</td>
<td>Diagnose</td>
</tr>
<tr>
<td>health_101</td>
<td>Insufficient water intake</td>
</tr>
<tr>
<td>health_102</td>
<td>Increase in drinking cycles</td>
</tr>
<tr>
<td>health_103</td>
<td>Reduced drinking cycles</td>
</tr>
<tr>
<td>health_104</td>
<td>Temperature increase</td>
</tr>
<tr>
<td>health_106</td>
<td>Temperature drop</td>
</tr>
<tr>
<td>health_601</td>
<td>THI ‚â• 72 Heat stress</td>
</tr>
<tr>
<td>health_602</td>
<td>THI ‚â• 78 Heat stress</td>
</tr>
<tr>
<td>health_603</td>
<td>THI ‚â• 82 Heat stress</td>
</tr>
<tr>
<td>health_703</td>
<td>Drop in activity</td>
</tr>
<tr>
<td>feeding_201</td>
<td>Feed efficiency</td>
</tr>
<tr>
<td>feeding_202</td>
<td>Risk of acidosis</td>
</tr>
<tr>
<td>feeding_203</td>
<td>Increase in average pH</td>
</tr>
<tr>
<td>feeding_204</td>
<td>Drop in average pH</td>
</tr>
<tr>
<td>feeding_205</td>
<td>Increase in 12h pH</td>
</tr>
<tr>
<td>feeding_206</td>
<td>Drop in 12h pH</td>
</tr>
<tr>
<td>fertility_105</td>
<td>Indication of imminent calving</td>
</tr>
<tr>
<td>fertility_702</td>
<td>Oestrus</td>
</tr>
<tr>
<td>actincrease_701</td>
<td>Increase in activity</td>
</tr>
<tr>
<td>actincrease_704</td>
<td>Increase in activity</td>
</tr>
</tbody></table>
<h2 id='create-events'>Create Events</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">organisation_id</span> <span class="o">=</span> <span class="s">'123456qwertz'</span>
<span class="n">official_id</span> <span class="o">=</span> <span class="s">'AT111111112'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/organisations/'</span> <span class="o">+</span> <span class="n">organisation_id</span> <span class="o">+</span> <span class="s">'/animals/'</span> <span class="o">+</span> <span class="n">official_id</span> <span class="o">+</span> <span class="s">'/events'</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"events"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s">"event_type"</span><span class="p">:</span> <span class="s">"insemination"</span><span class="p">,</span>
            <span class="s">"event_ts"</span><span class="p">:</span> <span class="s">"2019-01-18T12:00:00+00:00"</span><span class="p">,</span>
            <span class="s">"days_to_calving"</span><span class="p">:</span> <span class="mi">275</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">all_animal_events</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X PUT <span class="s2">"[endpoint]/organisations/[organisation_id]/animals/[official_id]/events"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span>
        -d <span class="s2">"{</span><span class="se">\"</span><span class="s2">events</span><span class="se">\"</span><span class="s2">: [{</span><span class="se">\"</span><span class="s2">event_type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">insemination</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">event_ts</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2019-01-18T12:00:00+00:00</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">days_to_calving</span><span class="se">\"</span><span class="s2">: 275}]}"</span>
</code></pre>
<blockquote>
<p>Response example (will change)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c584ba651945498be341123"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"animal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c480ab3314724e123456789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"create_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-04T14:26:46+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-18T12:00:00+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insemination"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"days_to_calving"</span><span class="p">:</span><span class="w"> </span><span class="mi">275</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint creates events for an animal with the given <code>official_id</code> which belongs to the organisation with the given <code>organisation_id</code>. If the event is created depents on the <code>event_type</code> and the <code>event_ts</code>. If the event with this two parameters does not exist, it gets created. Otherwise the event is skipped.
It is possible to add just the events to the data which should be added to the smaXtec system or add just all events from your system and the smaXtec system adds those which are not in the system.</p>

<aside class="notice">Just events of the type <b>heat</b>, <b>insemination</b>, <b>pregnancy_result</b>, <b>dry_off</b>, <b>calving_confirmation</b>, <b>abort</b> and <b>diagnosis</b> can be created via the API.</aside>

<p><strong>HTTP Request</strong></p>

<p><code>PUT &quot;[endpoint]/organisations/[organisation_id]/animals/[official_id]/events&quot;</code></p>

<p><strong>URL Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>organisation_id</td>
<td>The ID of the organisation which the animals belong to.</td>
<td><code>required</code></td>
</tr>
<tr>
<td>official_id</td>
<td>The official id of the animal. This is in the most cases the eartag of the animal.</td>
<td><code>required</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>_id</td>
<td>ID of the Event in the smaXtec system.</td>
<td></td>
</tr>
<tr>
<td>animal_id</td>
<td>ID of the Aniamal in the smaXtec system.</td>
<td></td>
</tr>
<tr>
<td>create_ts</td>
<td>Time when the event was created.</td>
<td></td>
</tr>
<tr>
<td>event_ts</td>
<td>Time when the event happened.</td>
<td></td>
</tr>
<tr>
<td>event_type</td>
<td>Type of the event.</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Heat Parameters</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>cycle_length</td>
<td>Length of the current cycle.</td>
<td></td>
</tr>
<tr>
<td>reason</td>
<td>The reason why the heat was added.</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Insemination Parameters</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>days_to_calving</td>
<td>Days from the insamination untill the expected calving date. Default: <code>280</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Pregnancy Result Parameters</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>expected_calving_date</td>
<td>Date when the calving is expected.</td>
<td></td>
</tr>
<tr>
<td>insemination_date</td>
<td>Date of the insamination which led to the pregnancy result. If no prior insemination on that date is saved an insemination event on that date will be created.</td>
<td></td>
</tr>
<tr>
<td>pregnant</td>
<td>If the pregnancy resutl was positive (true) or negative (false).</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Calving Confirmation Parameters</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>calving_number</td>
<td>Number of calvings.</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Abort Parameters</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>late_abort</td>
<td>When the cow was long enough pregnant so that the cow is lactating then <code>late_abort</code> is <code>true</code>.</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Diagnosis</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>icar_key</td>
<td>ICAR key for the diagnosis.</td>
<td></td>
</tr>
<tr>
<td>diagnosis_key</td>
<td>If an own key for diagnosis is used, it should be set here.</td>
<td></td>
</tr>
<tr>
<td>diagnosis_key_type</td>
<td>If an own key for diagnosis is used, a type of the diagnosis_key should be defined. eg.: <code>MY_OWN_KEY_DEFENITION_SYSTEM</code></td>
<td></td>
</tr>
</tbody></table>
<h1 id='translations'>Translations</h1>
<p>The translated text for events or specific events can be accessed over the integration API.</p>
<h2 id='get-all-event-translations'>Get all Event Translations</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">language</span> <span class="o">=</span> <span class="s">'en'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/translations/'</span> <span class="o">+</span> <span class="n">language</span> <span class="o">+</span> <span class="s">'/events'</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">event_text</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X GET <span class="s2">"[endpoint]/translations/[language]/events"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"EVENT"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"HEALTH_101"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"TITLE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Indication of too few daily drinking cycles ({{value | number:0}})"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DESCRIPTION"</span><span class="p">:</span><span class="w"> </span><span class="s2">"On {{event_ts | timestamp:'dddd, ll'}} the number of drinking cycles was {{value | number:0}}. &lt;br </span><span class="se">\/</span><span class="s2">&gt;Please check provision of water and state of health (e.g. heat stress)."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"KEYWORD"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Insufficient water intake"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"HEALTH_102"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"TITLE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Indication of an increase in number of drinking cycles compared with the previous day by {{value | number: 0}}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DESCRIPTION"</span><span class="p">:</span><span class="w"> </span><span class="s2">"On {{event_ts | timestamp:'dddd, ll'}} the animal drank {{value | number:0}} times more than the previous day. &lt;br </span><span class="se">\/</span><span class="s2">&gt;Please check animal's state of health and possible heat stress."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"KEYWORD"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Increase in drinking cycles"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>With this call translations for the animal events can be accessed for various languages. The translations contain for each event a <code>KEYWORD</code>, a <code>TITLE</code> and a <code>DESCRIPTION</code>.</p>

<aside class="notice">Current available languages: <b>de, en-au, en, es, fr, hr, hu, it, ko, lv, nl, pl, pt, ro, ru, sl, tr, uk, zh-cn</b></aside>

<p><strong>HTTP Request</strong></p>

<p><code>GET &quot;[endpoint]/translations/[language]/events&quot;</code></p>

<table><thead>
<tr>
<th>Key</th>
<th>Descrition</th>
</tr>
</thead><tbody>
<tr>
<td><code>KEYWORD</code></td>
<td>Keywords for the event translation.</td>
</tr>
<tr>
<td><code>TITLE</code></td>
<td>Short description.</td>
</tr>
<tr>
<td><code>DESCRIPTION</code></td>
<td>Detailed information about the event.</td>
</tr>
</tbody></table>
<h2 id='get-single-event-translations'>Get single Event Translations</h2>
<blockquote>
<p>Request</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">endpoint</span> <span class="o">=</span> <span class="s">'https://api-staging.smaxtec.com/integration/v2'</span>
<span class="n">language</span> <span class="o">=</span> <span class="s">'en'</span>
<span class="n">event_type</span> <span class="o">=</span> <span class="s">'health_102'</span>
<span class="n">route</span> <span class="o">=</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s">'/translations/'</span> <span class="o">+</span> <span class="n">language</span> <span class="o">+</span> <span class="s">'/events/'</span> <span class="o">+</span> <span class="n">event_type</span>
<span class="n">token</span> <span class="o">=</span> <span class="s">'yx2zvuB8JD8ppwGti84OT8Muq5eiB2b2EZqsqC-HOXUvLSg'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'bearer '</span> <span class="o">+</span> <span class="n">token</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">status_code</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">health_102_text</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre><pre class="highlight shell"><code>curl -X GET <span class="s2">"[endpoint]/translations/[language]/events/[event_type]"</span> <span class="se">\</span>
        -H  <span class="s2">"accept: application/json"</span> <span class="se">\</span>
        -H  <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"EVENT"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"health_102"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"DESCRIPTION"</span><span class="p">:</span><span class="w"> </span><span class="s2">"On {{event_ts | timestamp:'dddd, ll'}} the animal drank {{value | number:0}} times more than the previous day. &lt;br /&gt;Please check animal's state of health and possible heat stress."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"KEYWORD"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Increase in drinking cycles"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"TITLE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Indication of an increase in number of drinking cycles compared with the previous day by {{value | number: 0}}"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>It is also possible to access the translation for just a single event.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET &quot;[endpoint]/translations/[language]/events/[event_type]&quot;</code></p>
<h1 id='errors'>Errors</h1>
<p>The smaXtec Intern API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>UnauthorizedError</td>
<td>The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn‚Äôt understand how to supply the credentials required.</td>
</tr>
<tr>
<td>404</td>
<td>NotFoundError</td>
<td>Organisation not found.</td>
</tr>
<tr>
<td>409</td>
<td>ConflictError</td>
<td>A conflict happened while processing the request. The resource might have been modified while the request was being processed.</td>
</tr>
<tr>
<td>422</td>
<td>AttributeError</td>
<td>The request was well-formed but was unable to be followed due to semantic errors.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="bash">bash</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
